<html>
	<head>
		<title>
			factoreum.com
		</title>	
	</head>
	<body style="text-align:center;vertical-align:middle;font-family:Helvetica Neue;font-size:36px;font-weight:bold;color:#aaa;">
		factoreum
		<br /> 		
		<script type="text/javascript">
		
			window.addEventListener('load', function() {
				// Checking if Web3 has been injected by the browser (Mist/MetaMask)
				if (typeof web3 !== 'undefined') {
					// Use Mist/MetaMask's provider
					window.web3 = new Web3(web3.currentProvider);  
				} 
				else {
					console.log('No web3? You should consider trying MetaMask!')
				}
			});
		
			var _n = 15;
			var _solvingTime = 3600;
			var factor;
			function test(){
				var factorContract = web3.eth.contract([{"constant":true,"inputs":[],"name":"problemEnd","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"n","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"solver","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"isSolved","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[],"name":"withdrawUnsolved","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"thisContract","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[],"name":"addFunds","outputs":[],"payable":true,"stateMutability":"payable","type":"function"},{"constant":true,"inputs":[],"name":"requester","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"p","type":"uint256"},{"name":"q","type":"uint256"}],"name":"solve","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"inputs":[{"name":"_n","type":"uint256"},{"name":"_solvingTime","type":"uint256"}],"payable":true,"stateMutability":"payable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"name":"solver","type":"address"},{"indexed":false,"name":"p","type":"uint256"},{"indexed":false,"name":"q","type":"uint256"}],"name":"problemSolved","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"amount","type":"uint256"},{"indexed":false,"name":"funder","type":"address"}],"name":"fundIncreased","type":"event"}]);
				factor = factorContract.new(
				   _n,
				   _solvingTime,
				   {
				     from: web3.eth.accounts[0], 
				     data: '0x606060405230600460006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060405160408061079a833981016040528080519060200190919080519060200190919050508160008190555080420160018190555033600260006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506000600460146101000a81548160ff02191690831515021790555050506106b3806100e76000396000f300606060405260043610610099576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff16806314e889771461009e5780632e52d606146100c757806349a7a26d146100f057806364d98f6e146101455780637866cec214610172578063891e6f4314610187578063a26759cb146101dc578063b61e96a5146101e6578063f49230261461023b575b600080fd5b34156100a957600080fd5b6100b1610267565b6040518082815260200191505060405180910390f35b34156100d257600080fd5b6100da61026d565b6040518082815260200191505060405180910390f35b34156100fb57600080fd5b610103610273565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b341561015057600080fd5b610158610299565b604051808215151515815260200191505060405180910390f35b341561017d57600080fd5b6101856102ac565b005b341561019257600080fd5b61019a6103af565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b6101e46103d5565b005b34156101f157600080fd5b6101f9610453565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b341561024657600080fd5b6102656004808035906020019091908035906020019091905050610479565b005b60015481565b60005481565b600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b600460149054906101000a900460ff1681565b600460149054906101000a900460ff161515156102c857600080fd5b600154421115156102d857600080fd5b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561033457600080fd5b3373ffffffffffffffffffffffffffffffffffffffff166108fc600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16319081150290604051600060405180830381858888f1935050505015156103ad57600080fd5b565b600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b60015442111515156103e657600080fd5b7fa4d2c4f9ea21fda8441b3b94dd61e6aece88036e25471d7126a411f78d6eb6783433604051808381526020018273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019250505060405180910390a1565b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b600460149054906101000a900460ff1615151561049557600080fd5b60015442111515156104a657600080fd5b6000548183021415156104b857600080fd5b6001600460146101000a81548160ff02191690831515021790555033600360006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055507fbad7373503e1ff75c83c79510aafed1a439ad1c8a805fb2f71a43fb47c72525b338383604051808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001838152602001828152602001935050505060405180910390a16105c9600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16316105cd565b5050565b600460149054906101000a900460ff1615156105e857600080fd5b600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561064457600080fd5b3373ffffffffffffffffffffffffffffffffffffffff166108fc829081150290604051600060405180830381858888f19350505050151561068457600080fd5b505600a165627a7a7230582078c49071d825b5b1d45181b2300edf43495f860fdcedf5bc30a5d4a438c1979f0029', 
				     gas: '4700000'
				   }, function (e, contract){
				    console.log(e, contract);
				    if (typeof contract.address !== 'undefined') {
				         console.log('Contract mined! address: ' + contract.address + ' transactionHash: ' + contract.transactionHash);
				    }
				 });
			}
			
			function isSolved(){
				var factorContract = web3.eth.contract([{"constant":true,"inputs":[],"name":"problemEnd","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"n","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"solver","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"isSolved","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[],"name":"withdrawUnsolved","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"thisContract","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[],"name":"addFunds","outputs":[],"payable":true,"stateMutability":"payable","type":"function"},{"constant":true,"inputs":[],"name":"requester","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"p","type":"uint256"},{"name":"q","type":"uint256"}],"name":"solve","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"inputs":[{"name":"_n","type":"uint256"},{"name":"_solvingTime","type":"uint256"}],"payable":true,"stateMutability":"payable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"name":"solver","type":"address"},{"indexed":false,"name":"p","type":"uint256"},{"indexed":false,"name":"q","type":"uint256"}],"name":"problemSolved","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"amount","type":"uint256"},{"indexed":false,"name":"funder","type":"address"}],"name":"fundIncreased","type":"event"}]);
				var contractInstance = factorContract.at('0x61492f746D3C325Ca77ad12598333d73AC73258F');
				contractInstance.isSolved({value: (4000000000000000), gas: 250000}, function(error, result){if(!error){
						console.log(result);
					}
					else {
						console.error(error);
					}}); 
					
					/*.call({from: '0xc365112b4eb63e663ab95d290fb827a752d0a67c'}, function(error, result){
					if(!error){
						console.log(result);
					}
					else {
						console.error(error);
					}
				});*/
			}
		</script>
		<button onclick="test();">Click me</button>
		<button onclick="isSolved();">Is it solved2?</button>
	</body>
</html>
